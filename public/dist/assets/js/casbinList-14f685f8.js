var H=Object.defineProperty,K=Object.defineProperties;var O=Object.getOwnPropertyDescriptors;var x=Object.getOwnPropertySymbols;var W=Object.prototype.hasOwnProperty,X=Object.prototype.propertyIsEnumerable;var w=(n,l,u)=>l in n?H(n,l,{enumerable:!0,configurable:!0,writable:!0,value:u}):n[l]=u,A=(n,l)=>{for(var u in l||(l={}))W.call(l,u)&&w(n,u,l[u]);if(x)for(var u of x(l))X.call(l,u)&&w(n,u,l[u]);return n},V=(n,l)=>K(n,O(l));import{a4 as b,d as Y,r as q,$ as f,J as Z,L as ee,M as te,f as r,a5 as ae,o as h,c as ne,j as a,h as o,l as e,a6 as oe,R as le,g as R,a7 as ie,B as ue,a as se,z as y,E as g,C as ce}from"./index-ad449e55.js";import{e as re}from"./edit-cc7581a8.js";function de(n){return b({url:"/casbins",method:"get",params:n})}function me(n){return b({url:"/casbins",method:"post",data:n})}function pe(n){return b({url:"/casbins/delete",method:"post",data:{_id:n}})}function _e(n){return b({url:"/casbins/update",method:"post",data:n})}const fe={class:"app-container"},ge=y("\u65B0\u589E"),be={class:"dialog-footer"},Ce=y("\u786E \u5B9A"),ve=y("\u53D6 \u6D88"),De={name:"user"},Be=Y(V(A({},De),{setup(n){const l=q(f),u=q(f),t=Z({loading:!0,ids:[],single:!0,multiple:!0,total:0,casbinList:[],dialog:{visible:!1},formData:{},queryParams:{page:1,pageSize:10},rules:{value:[{required:!0,message:"casbin\u7684\u503C\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]}}),{loading:I,queryParams:d,total:F,dialog:C,formData:v,rules:P}=ee(t);function m(){t.loading=!0,de(t.queryParams).then(({data:s})=>{t.casbinList=s.items,t.total=s.count,t.loading=!1})}function S(s){t.ids=s.map(i=>i._id),t.single=s.length!==1,t.multiple=!s.length}async function U(){t.dialog={title:"\u6DFB\u52A0casbin",visible:!0}}async function z(s){t.dialog={title:"\u66F4\u65B0casbin",visible:!0},t.formData=s}function L(){u.value.validate(s=>{s&&(t.formData._id?_e(t.formData).then(()=>{g.success("\u4FEE\u6539casbin\u6210\u529F"),_(),m()}):me(t.formData).then(()=>{g.success("\u65B0\u589Ecasbin\u6210\u529F"),_(),m()}))})}function M(s){const i=s._id||t.ids;ce.confirm("\u662F\u5426\u786E\u8BA4\u5220\u9664ID\u4E3A\u300C"+i+"\u300D\u7684casbin?","\u8B66\u544A",{confirmButtonText:"\u786E\u5B9A",cancelButtonText:"\u53D6\u6D88",type:"warning"}).then(function(){pe(i).then(()=>{g.success("\u5220\u9664\u6210\u529F"),m()})}).catch(()=>g.info("\u5DF2\u53D6\u6D88\u5220\u9664"))}function _(){t.dialog.visible=!1,t.formData={}}return te(()=>{m()}),(s,i)=>{const p=r("el-button"),B=r("el-form-item"),k=r("el-col"),E=r("el-row"),D=r("el-table-column"),N=r("el-table"),T=r("pagination"),$=r("el-card"),j=r("el-input"),J=r("el-dialog"),Q=ae("loading");return h(),ne("div",fe,[a(E,{gutter:20},{default:o(()=>[a(k,{span:24,xs:24},{default:o(()=>[a($,{class:"box-card"},{default:o(()=>[a(e(f),{ref_key:"queryFormRef",ref:l,model:e(d),inline:!0},{default:o(()=>[a(E,null,{default:o(()=>[a(k,{span:18,xs:24},{default:o(()=>[a(B,null,{default:o(()=>[a(p,{type:"success",icon:e(oe),onClick:U},{default:o(()=>[ge]),_:1},8,["icon"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model"]),le((h(),R(N,{data:e(t).casbinList,onSelectionChange:S},{default:o(()=>[a(D,{key:"_id",label:"casbinId",align:"center",prop:"_id"}),a(D,{key:"value",label:"casbin\u503C",align:"center",prop:"value"}),a(D,{label:"\u64CD\u4F5C",align:"center",width:"150"},{default:o(c=>[a(p,{type:"primary",icon:e(re),circle:"",plain:"",onClick:G=>z(c.row)},null,8,["icon","onClick"]),a(p,{type:"danger",icon:e(ie),circle:"",plain:"",onClick:G=>M(c.row)},null,8,["icon","onClick"])]),_:1})]),_:1},8,["data"])),[[Q,e(I)]]),e(F)>0?(h(),R(T,{key:0,total:e(F),page:e(d).page,"onUpdate:page":i[0]||(i[0]=c=>e(d).page=c),limit:e(d).pageSize,"onUpdate:limit":i[1]||(i[1]=c=>e(d).pageSize=c),onPagination:m},null,8,["total","page","limit"])):ue("",!0)]),_:1})]),_:1})]),_:1}),a(J,{title:e(C).title,modelValue:e(C).visible,"onUpdate:modelValue":i[3]||(i[3]=c=>e(C).visible=c),width:"600px","append-to-body":"",onClose:_},{footer:o(()=>[se("div",be,[a(p,{type:"primary",onClick:L},{default:o(()=>[Ce]),_:1}),a(p,{onClick:_},{default:o(()=>[ve]),_:1})])]),default:o(()=>[a(e(f),{ref_key:"dataFormRef",ref:u,model:e(v),rules:e(P),"label-width":"100px"},{default:o(()=>[a(B,{label:"casbin\u503C",prop:"value"},{default:o(()=>[a(j,{modelValue:e(v).value,"onUpdate:modelValue":i[2]||(i[2]=c=>e(v).value=c),placeholder:"\u8BF7\u8F93\u5165casbin\u7684\u503C"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["title","modelValue"])])}}}));export{Be as default};
