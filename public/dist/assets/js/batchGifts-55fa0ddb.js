var Q=Object.defineProperty,H=Object.defineProperties;var K=Object.getOwnPropertyDescriptors;var V=Object.getOwnPropertySymbols;var O=Object.prototype.hasOwnProperty,W=Object.prototype.propertyIsEnumerable;var k=(o,u,n)=>u in o?Q(o,u,{enumerable:!0,configurable:!0,writable:!0,value:n}):o[u]=n,x=(o,u)=>{for(var n in u||(u={}))O.call(u,n)&&k(o,n,u[n]);if(V)for(var n of V(u))W.call(u,n)&&k(o,n,u[n]);return o},q=(o,u)=>H(o,K(u));import{a4 as S,d as X,r as G,$ as b,J as Y,L as Z,M as ee,f as r,a5 as te,o as v,c as ae,j as e,h as a,l as t,R as le,g as R,a as y,t as L,B as oe,z as D,P as ue,E as P}from"./index-ad449e55.js";import{u as ne}from"./filter-4c8c4852.js";function se(o){return S({url:"/activity/batchGifts",method:"post",data:o})}function ie(o){return S({url:"/activity/batchGiftsList",method:"get",params:o})}const re={class:"app-container"},de=D("\u53D1\u8D77\u8D60\u9001"),ce=D("\u8D60\u9001"),me={class:"dialog-footer"},pe=D("\u786E \u5B9A"),fe=D("\u53D6 \u6D88"),_e={name:"user"},Fe=X(q(x({},_e),{setup(o){const u=G(b),n=G(b),{proxy:U}=ue(),s=Y({loading:!0,total:0,batchGiftsList:[],dialog:{title:"",visible:!1},queryParams:{page:1,pageSize:10},rules:{num:[{required:!0,message:"\u8BE5\u503C\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],address:[{required:!0,message:"\u8BE5\u503C\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]},formData:{}}),{loading:z,queryParams:m,total:B,dialog:h,rules:N,formData:p}=Z(s);function f(){s.loading=!0,ie(s.queryParams).then(({data:d})=>{s.batchGiftsList=d.items,s.total=d.count,s.loading=!1})}async function C(d){d&&(s.formData.address=d),s.dialog={title:"\u8F6C\u8D26",visible:!0}}function $(){n.value.validate(d=>{d&&se(s.formData).then(()=>{P.success("\u8D60\u9001\u6210\u529F"),_(),f()}).catch(()=>{P.error("\u8D60\u9001\u5931\u8D25"),_(),f()})})}function _(){s.dialog.visible=!1,s.formData={}}return ee(()=>{f()}),(d,i)=>{const g=r("el-button"),F=r("el-form-item"),E=r("el-col"),A=r("el-row"),c=r("el-table-column"),M=r("el-table"),T=r("pagination"),j=r("el-card"),w=r("el-input"),I=r("el-dialog"),J=te("loading");return v(),ae("div",re,[e(A,{gutter:20},{default:a(()=>[e(E,{span:24,xs:24},{default:a(()=>[e(j,{class:"box-card"},{default:a(()=>[e(t(b),{ref_key:"queryFormRef",ref:u,model:t(m),inline:!0},{default:a(()=>[e(A,null,{default:a(()=>[e(E,{span:24,xs:24},{default:a(()=>[e(F,null,{default:a(()=>[e(g,{type:"success",onClick:i[0]||(i[0]=l=>C("")),disabled:t(U).$hasRole.disShow(["finance"])},{default:a(()=>[de]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model"]),le((v(),R(M,{data:t(s).batchGiftsList},{default:a(()=>[e(c,{label:"\u8BA2\u5355\u53F7",align:"center",prop:"no",width:"120"}),e(c,{label:"\u6536\u6B3E\u4EBA\u94B1\u5305\u5730\u5740",align:"center",prop:"address",width:"380"}),e(c,{label:"\u6570\u91CF",align:"center",prop:"amount"}),e(c,{label:"\u65F6\u95F4",align:"center"},{default:a(l=>[y("p",null,L(t(ne)(l.row.createdAt)),1)]),_:1}),e(c,{label:"\u72B6\u6001",align:"center"},{default:a(l=>[y("p",null,L(l.row.status?"\u6210\u529F":"\u5904\u7406\u4E2D"),1)]),_:1}),e(c,{label:"\u64CD\u4F5C",align:"center",width:"150"},{default:a(l=>[e(g,{type:"primary",plain:"",onClick:ge=>C(l.row.address)},{default:a(()=>[ce]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[J,t(z)]]),t(B)>0?(v(),R(T,{key:0,total:t(B),page:t(m).page,"onUpdate:page":i[1]||(i[1]=l=>t(m).page=l),limit:t(m).pageSize,"onUpdate:limit":i[2]||(i[2]=l=>t(m).pageSize=l),onPagination:f},null,8,["total","page","limit"])):oe("",!0)]),_:1})]),_:1})]),_:1}),e(I,{title:t(h).title,modelValue:t(h).visible,"onUpdate:modelValue":i[5]||(i[5]=l=>t(h).visible=l),width:"600px","append-to-body":"",onClose:_},{footer:a(()=>[y("div",me,[e(g,{type:"primary",onClick:$},{default:a(()=>[pe]),_:1}),e(g,{onClick:_},{default:a(()=>[fe]),_:1})])]),default:a(()=>[e(t(b),{ref_key:"dataFormRef",ref:n,model:t(p),rules:t(N),"label-width":"100px"},{default:a(()=>[e(F,{label:"address",prop:"address"},{default:a(()=>[e(w,{modelValue:t(p).address,"onUpdate:modelValue":i[3]||(i[3]=l=>t(p).address=l),placeholder:"\u8BF7\u8F93\u5165\u6536\u6B3E\u4EBA\u94B1\u5305\u5730\u5740"},null,8,["modelValue"])]),_:1}),e(F,{label:"num",prop:"num"},{default:a(()=>[e(w,{modelValue:t(p).num,"onUpdate:modelValue":i[4]||(i[4]=l=>t(p).num=l),placeholder:"\u8BF7\u8F93\u5165\u6570\u91CF"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["title","modelValue"])])}}}));export{Fe as default};
