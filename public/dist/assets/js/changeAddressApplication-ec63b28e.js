var j=Object.defineProperty,I=Object.defineProperties;var J=Object.getOwnPropertyDescriptors;var C=Object.getOwnPropertySymbols;var Q=Object.prototype.hasOwnProperty,Z=Object.prototype.propertyIsEnumerable;var E=(u,s,n)=>s in u?j(u,s,{enumerable:!0,configurable:!0,writable:!0,value:n}):u[s]=n,k=(u,s)=>{for(var n in s||(s={}))Q.call(s,n)&&E(u,n,s[n]);if(C)for(var n of C(s))Z.call(s,n)&&E(u,n,s[n]);return u},y=(u,s)=>I(u,J(s));import{u as x}from"./filter-4c8c4852.js";import{a4 as U,b as G,d as H,r as q,$ as w,J as K,L as O,M as W,f as c,a5 as X,o as g,c as B,j as t,h as r,l as o,R as Y,g as N,z as f,t as _,a as D,p as ee,B as ae,C as te,E as ue}from"./index-ad449e55.js";function se(u){return U({url:"/marketing/distribution/change_address",method:"get",params:u})}function re(u){return U({url:"/marketing/distribution/change_address/review",method:"post",data:u})}const ne={class:"app-container"},le={key:0},oe=f("\u540C\u610F"),ie=f("\u62D2\u7EDD"),de={key:1},ce={name:"user"},_e=H(y(k({},ce),{setup(u){const s=q(w),n=q(w),l=K({loading:!0,ids:[],single:!0,multiple:!0,total:0,changeAddressApplicationList:[],dialog:{visible:!1},updateDialog:{visible:!1},queryParams:{page:1,pageSize:10},formData:{},rules:{username:[{required:!0,message:"\u7528\u6237\u540D\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],password:[{required:!0,message:"\u5BC6\u7801\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"},{required:!0,pattern:/(?=.*[0-9])(?=.*[a-zA-Z]).{8,32}/,message:"\u5BC6\u7801\u5FC5\u987B\u5305\u542B\u6570\u7EC4\u548C\u5B57\u6BCD,\u957F\u5EA68-32\u4F4D\u4E4B\u95F4",trigger:"blur"}],roles:[{required:!0,message:"\u72B6\u6001\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]}}),{loading:z,queryParams:p,total:h}=O(l);function A(){l.loading=!0,se(l.queryParams).then(({data:i})=>{l.changeAddressApplicationList=i.items,l.total=i.count,l.loading=!1})}const $=i=>{var a="";switch(i){case 0:a="warningbox";break;case 1:a="successbox";break;case 2:a="errorbox";break}return a},P=i=>{var a="";switch(i){case 0:a="\u672A\u5904\u7406";break;case 1:a="\u540C\u610F";break;case 2:a="\u62D2\u7EDD";break}return a};function v(i,a){l.formData._id=i._id,l.formData.status=a;let m=`\u786E\u5B9A\u8981[${a==1?"\u540C\u610F":"\u62D2\u7EDD"}]\u7BA1\u7406\u5458[${i.applyAdminUser.username}]\u5BF9\u5206\u9500\u5546[${i.distUser.username}]\u7684\u4FEE\u6539\u5417`;te.confirm(m,"\u5BA1\u6838",{confirmButtonText:"\u786E\u5B9A",cancelButtonText:"\u53D6\u6D88",type:"warning"}).then(()=>{re(l.formData).then(b=>{A(),ue.success("\u5BA1\u6838\u6210\u529F")})}).finally(()=>{R()})}function R(){l.dialog.visible=!1,l.formData={},n.value.resetFields()}return W(()=>{A()}),(i,a)=>{const m=c("el-col"),b=c("el-row"),d=c("el-table-column"),F=c("el-button"),S=c("el-table"),T=c("pagination"),L=c("el-card"),M=X("loading");return g(),B("div",ne,[t(b,{gutter:20},{default:r(()=>[t(m,{span:24,xs:24},{default:r(()=>[t(L,{class:"box-card"},{default:r(()=>[t(o(w),{ref_key:"queryFormRef",ref:s,model:o(p),inline:!0},{default:r(()=>[t(b,null,{default:r(()=>[t(m,{span:24,xs:24})]),_:1})]),_:1},8,["model"]),Y((g(),N(S,{data:o(l).changeAddressApplicationList},{default:r(()=>[t(d,{label:"\u5206\u9500\u5546",align:"center",prop:"distUser.username",width:"100"}),t(d,{label:"\u65E7\u94B1\u5305",align:"center"},{default:r(e=>[f(_(e.row.oldAddress),1)]),_:1}),t(d,{label:"\u65B0\u94B1\u5305",align:"center"},{default:r(e=>[f(_(e.row.newAddress),1)]),_:1}),t(d,{label:"\u7533\u8BF7\u65F6\u95F4",align:"center",width:"180"},{default:r(e=>[D("p",null,_(o(x)(e.row.createdAt)),1)]),_:1}),t(d,{label:"\u7533\u8BF7\u4EBA",align:"center",prop:"applyAdminUser.username",width:"100"}),t(d,{label:"\u72B6\u6001",align:"center",width:"120"},{default:r(e=>[D("span",{class:ee($(e.row.status))},_(P(e.row.status)),3)]),_:1}),t(d,{label:"\u5BA1\u6838\u65F6\u95F4",align:"center",width:"180"},{default:r(e=>[D("p",null,_(e.row.reviewTime?o(x)(e.row.reviewTime):"--"),1)]),_:1}),t(d,{label:"\u64CD\u4F5C",align:"center",width:"200"},{default:r(e=>[e.row.status==0?(g(),B("div",le,[t(F,{type:"success",plain:"",onClick:V=>v(e.row,1)},{default:r(()=>[oe]),_:2},1032,["onClick"]),t(F,{type:"danger",plain:"",onClick:V=>v(e.row,2)},{default:r(()=>[ie]),_:2},1032,["onClick"])])):(g(),B("div",de,_(e.row.reviewAdminUser.username),1))]),_:1})]),_:1},8,["data"])),[[M,o(z)]]),o(h)>0?(g(),N(T,{key:0,total:o(h),page:o(p).page,"onUpdate:page":a[0]||(a[0]=e=>o(p).page=e),limit:o(p).pageSize,"onUpdate:limit":a[1]||(a[1]=e=>o(p).pageSize=e),onPagination:A},null,8,["total","page","limit"])):ae("",!0)]),_:1})]),_:1})]),_:1})])}}}));var fe=G(_e,[["__scopeId","data-v-08edb3fa"]]);export{fe as default};
