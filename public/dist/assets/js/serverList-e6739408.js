var W=Object.defineProperty,X=Object.defineProperties;var Y=Object.getOwnPropertyDescriptors;var q=Object.getOwnPropertySymbols;var Z=Object.prototype.hasOwnProperty,ee=Object.prototype.propertyIsEnumerable;var I=(o,n,i)=>n in o?W(o,n,{enumerable:!0,configurable:!0,writable:!0,value:i}):o[n]=i,U=(o,n)=>{for(var i in n||(n={}))Z.call(n,i)&&I(o,i,n[i]);if(q)for(var i of q(n))ee.call(n,i)&&I(o,i,n[i]);return o},P=(o,n)=>X(o,Y(n));import{a4 as V,b as ue,d as le,r as L,$ as E,J as te,L as ae,M as oe,f as d,a5 as re,o as g,c as h,j as e,h as t,l as u,a6 as se,R as ne,g as y,B,a as O,t as ie,p as de,z as w,E as R}from"./index-ad449e55.js";import{e as pe}from"./edit-cc7581a8.js";function me(o){return V({url:"/servers",method:"get",params:o})}function ce(o){return V({url:"/servers/"+o,method:"get"})}function _e(o){return V({url:"/servers",method:"post",data:o})}function De(o){return V({url:"/servers/update",method:"post",data:o})}const ge={class:"app-container"},fe=w("\u65B0\u589E"),Ae={key:0},ve={key:1},Fe={class:"dialog-footer"},be=w("\u786E \u5B9A"),Ee=w("\u53D6 \u6D88"),Be={name:"user"},Ve=le(P(U({},Be),{setup(o){const n=L(E),i=L(E),r=te({loading:!0,ids:[],single:!0,multiple:!0,total:0,serverList:[],dialog:{visible:!1},formData:{},queryParams:{page:1,pageSize:10},rules:{serverId:[{required:!0,message:"\u670D\u52A1\u5668Id\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],name:[{required:!0,message:"\u670D\u52A1\u5668\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],host:[{required:!0,message:"\u670D\u52A1\u5668\u5730\u5740\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],port:[{required:!0,message:"\u670D\u52A1\u5668\u7AEF\u53E3\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],apiHost:[{required:!0,message:"api\u5730\u5740\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],apiPort:[{required:!0,message:"api\u7AEF\u53E3\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],status:[{required:!0,message:"\u670D\u52A1\u5668\u7C7B\u578B\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],isOpenServer:[{required:!0,message:"\u670D\u52A1\u5668\u72B6\u6001\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]}}),{loading:z,queryParams:f,total:C,dialog:A,formData:s,rules:H}=ae(r);function v(){r.loading=!0,me(r.queryParams).then(({data:p})=>{r.serverList=p.items,r.total=p.count,r.loading=!1})}function N(p){r.ids=p.map(a=>a.serverId),r.single=p.length!==1,r.multiple=!p.length}async function M(){r.dialog={title:"\u6DFB\u52A0\u670D\u52A1\u5668",visible:!0}}async function $(p){const a=p.serverId;r.dialog={title:"\u670D\u52A1\u5668\u66F4\u65B0",visible:!0},ce(a).then(({data:_})=>{r.formData=_})}function j(){i.value.validate(p=>{p&&(r.dialog.title=="\u670D\u52A1\u5668\u66F4\u65B0"?De(r.formData).then(()=>{R.success("\u4FEE\u6539\u670D\u52A1\u5668\u6210\u529F"),F(),v()}):_e(r.formData).then(()=>{R.success("\u65B0\u589E\u670D\u52A1\u5668\u6210\u529F"),F(),v()}))})}function F(){r.dialog.visible=!1,r.formData.serverId=void 0,i.value.resetFields()}return oe(()=>{v()}),(p,a)=>{const _=d("el-button"),m=d("el-form-item"),k=d("el-col"),S=d("el-row"),c=d("el-table-column"),J=d("el-table"),Q=d("pagination"),T=d("el-card"),D=d("el-input"),b=d("el-option"),x=d("el-select"),G=d("el-dialog"),K=re("loading");return g(),h("div",ge,[e(S,{gutter:20},{default:t(()=>[e(k,{span:24,xs:24},{default:t(()=>[e(T,{class:"box-card"},{default:t(()=>[e(u(E),{ref_key:"queryFormRef",ref:n,model:u(f),inline:!0},{default:t(()=>[e(S,null,{default:t(()=>[e(k,{span:18,xs:24},{default:t(()=>[e(m,null,{default:t(()=>[e(_,{type:"success",icon:u(se),onClick:M},{default:t(()=>[fe]),_:1},8,["icon"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model"]),ne((g(),y(J,{data:u(r).serverList,onSelectionChange:N},{default:t(()=>[e(c,{key:"serverId",label:"\u670D\u52A1\u5668id",align:"center",prop:"serverId",width:"180"}),e(c,{key:"name",label:"\u670D\u52A1\u5668\u540D\u79F0",align:"center",prop:"name",width:"180"}),e(c,{label:"\u670D\u52A1\u5668\u5730\u5740",align:"center",prop:"host",width:"180"}),e(c,{label:"\u670D\u52A1\u5668\u7AEF\u53E3",align:"center",prop:"port",width:"180"}),e(c,{label:"\u670D\u52A1\u5668api\u5730\u5740",align:"center",prop:"apiHost",width:"180"}),e(c,{label:"\u670D\u52A1\u5668api\u7AEF\u53E3",align:"center",prop:"apiPort",width:"180"}),e(c,{label:"\u670D\u52A1\u5668\u7C7B\u578B",align:"center"},{default:t(l=>[l.row.status==1?(g(),h("p",Ae,"\u65B0\u7528\u6237\u9ED8\u8BA4\u5206\u914D")):B("",!0),l.row.status==0?(g(),h("p",ve,"\u4E0D\u5206\u914D")):B("",!0)]),_:1}),e(c,{label:"\u670D\u52A1\u5668\u72B6\u6001",align:"center"},{default:t(l=>[O("span",{class:de(l.row.isOpenServer?"successbox":"errorbox")},ie(l.row.isOpenServer?"\u5F00\u542F":"\u5173\u95ED"),3)]),_:1}),e(c,{label:"\u64CD\u4F5C",align:"center",width:"150"},{default:t(l=>[e(_,{type:"primary",icon:u(pe),circle:"",plain:"",onClick:he=>$(l.row)},null,8,["icon","onClick"])]),_:1})]),_:1},8,["data"])),[[K,u(z)]]),u(C)>0?(g(),y(Q,{key:0,total:u(C),page:u(f).page,"onUpdate:page":a[0]||(a[0]=l=>u(f).page=l),limit:u(f).pageSize,"onUpdate:limit":a[1]||(a[1]=l=>u(f).pageSize=l),onPagination:v},null,8,["total","page","limit"])):B("",!0)]),_:1})]),_:1})]),_:1}),e(G,{title:u(A).title,modelValue:u(A).visible,"onUpdate:modelValue":a[10]||(a[10]=l=>u(A).visible=l),width:"600px","append-to-body":"",onClose:F},{footer:t(()=>[O("div",Fe,[e(_,{type:"primary",onClick:j},{default:t(()=>[be]),_:1}),e(_,{onClick:F},{default:t(()=>[Ee]),_:1})])]),default:t(()=>[e(u(E),{ref_key:"dataFormRef",ref:i,model:u(s),rules:u(H),"label-width":"100px"},{default:t(()=>[u(A).title=="\u6DFB\u52A0\u670D\u52A1\u5668"?(g(),y(m,{key:0,label:"\u670D\u52A1\u5668id",prop:"serverId"},{default:t(()=>[e(D,{modelValue:u(s).serverId,"onUpdate:modelValue":a[2]||(a[2]=l=>u(s).serverId=l),placeholder:"\u8BF7\u8F93\u5165\u670D\u52A1\u5668id"},null,8,["modelValue"])]),_:1})):B("",!0),e(m,{label:"\u670D\u52A1\u5668\u540D\u79F0",prop:"name"},{default:t(()=>[e(D,{modelValue:u(s).name,"onUpdate:modelValue":a[3]||(a[3]=l=>u(s).name=l),placeholder:"\u8BF7\u8F93\u5165\u670D\u52A1\u5668\u540D\u79F0"},null,8,["modelValue"])]),_:1}),e(m,{label:"\u670D\u52A1\u5668\u5730\u5740",prop:"host"},{default:t(()=>[e(D,{modelValue:u(s).host,"onUpdate:modelValue":a[4]||(a[4]=l=>u(s).host=l),placeholder:"\u8BF7\u8F93\u5165\u670D\u52A1\u5668\u5730\u5740"},null,8,["modelValue"])]),_:1}),e(m,{label:"\u670D\u52A1\u5668\u7AEF\u53E3",prop:"port"},{default:t(()=>[e(D,{modelValue:u(s).port,"onUpdate:modelValue":a[5]||(a[5]=l=>u(s).port=l),placeholder:"\u8BF7\u8F93\u5165\u670D\u52A1\u5668\u7AEF\u53E3"},null,8,["modelValue"])]),_:1}),e(m,{label:"api\u5730\u5740",prop:"apiHost"},{default:t(()=>[e(D,{modelValue:u(s).apiHost,"onUpdate:modelValue":a[6]||(a[6]=l=>u(s).apiHost=l),placeholder:"\u8BF7\u8F93\u5165\u670D\u52A1\u5668api\u5730\u5740"},null,8,["modelValue"])]),_:1}),e(m,{label:"api\u7AEF\u53E3",prop:"apiPort"},{default:t(()=>[e(D,{modelValue:u(s).apiPort,"onUpdate:modelValue":a[7]||(a[7]=l=>u(s).apiPort=l),placeholder:"\u8BF7\u8F93\u5165\u670D\u52A1\u5668api\u7AEF\u53E3"},null,8,["modelValue"])]),_:1}),e(m,{prop:"status",label:"\u7C7B\u578B"},{default:t(()=>[e(x,{modelValue:u(s).status,"onUpdate:modelValue":a[8]||(a[8]=l=>u(s).status=l),placeholder:"\u670D\u52A1\u5668\u7C7B\u578B",clearable:"",style:{width:"200px"}},{default:t(()=>[e(b,{label:"\u65B0\u7528\u6237\u9ED8\u8BA4\u5206\u914D",value:1}),e(b,{label:"\u4E0D\u5206\u914D",value:0})]),_:1},8,["modelValue"])]),_:1}),e(m,{prop:"isOpenServer",label:"\u72B6\u6001"},{default:t(()=>[e(x,{modelValue:u(s).isOpenServer,"onUpdate:modelValue":a[9]||(a[9]=l=>u(s).isOpenServer=l),placeholder:"\u670D\u52A1\u5668\u72B6\u6001",clearable:"",style:{width:"200px"}},{default:t(()=>[e(b,{label:"\u5F00\u542F",value:!0}),e(b,{label:"\u5173\u95ED",value:!1})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["title","modelValue"])])}}}));var ke=ue(Ve,[["__scopeId","data-v-6fc536c4"]]);export{ke as default};
